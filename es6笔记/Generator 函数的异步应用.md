# Generator 函数的异步应用 ()

由于 `JavaScript` 是一门单线程语言，所以异步调用是最基本的，如果没有异步，不敢想象会有多卡

## 传统的异步实现方法

* 回调函数
* 事件监听
* 发布/订阅
* Promise 对象

`Generator` 函数为 `JavaScript` 的异步实现带入了一个全新的阶段

## 回调函数

为什么 Node 约定，回调函数的第一个参数必须为错误对象 `err`？

原因是函数分为两段执行，第一段执行完毕之后，函数的上下文结束，如果出现错误，原来的上下文无法捕捉，只能够当作参数传入第二段执行函数

## Promise 函数

* Promise 的提出是为了解决回调地狱的出现，防止代码的纵向发展，让代码横向发展。
* 但是大量的 `then` 关键字的出现，使得代码看上去非常的冗余

## Generator 函数

### 协程

协程的大概执行思路

1. 执行 A 函数
2. 暂停，把执行权交给 B 函数
3. 执行 B 函数，一段时间后，执行权返还给 A 函数
4. 继续执行 A 函数

### 协程的 Generator 函数实现

Generator 函数是协程在 `es6` 的实现，最大的特点就是通过 `yield` 函数可以交出函数的执行权，而且执行 Generator 函数不会返回执行结果，而是返回一个指针对象。

### Generator 函数的数据交换和错误处理

* 函数内部可以通过在 `yield` 表达式后面设置值来向函数外部输出值，通过调用 `next()` 返回对象的 `value` 属性获取
* 通过 `next(params)` 可以向函数内部传递参数，
* 函数的遍历器对象的 `throw()` 方法抛出的错误可以在函数内部捕获，内部捕获不了，也可以在函数体外部捕获

### 异步任务的封装



